<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS ECS Fargate Deployment Case Study</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        header {
            background-color: #d32f2f;
            color: white;
            padding: 20px 0;
            text-align: center;
        }
        main {
            max-width: 900px;
            margin: 30px auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
        }
        h2 {
            color: #d32f2f;
        }
        code {
            background: #eee;
            padding: 2px 4px;
            border-radius: 3px;
        }
        ul {
            margin-bottom: 20px;
        }
        .problem {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 10px 15px;
            margin-bottom: 15px;
        }
        .solution {
            background-color: #d4edda;
            border-left: 5px solid #28a745;
            padding: 10px 15px;
            margin-bottom: 20px;
        }
        .images {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 30px;
            justify-content: center;
        }
        .images img {
            max-width: 100%;
            border: 1px solid #ccc;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <header>
        <h1>ðŸš€ AWS ECS Fargate Deployment Case Study</h1>
    </header>
    <main>
        <h2>Project Overview (Technical Depth)</h2>
        <p>
            I built and deployed a containerized Python **FastAPI** microservice that returns <code>{"message": "Hello from ECS!"}</code>. The deployment target was **AWS Elastic Container Service (ECS) using the Fargate launch type**.
        </p>
        <p>
            The core objective was to demonstrate an end-to-end container delivery workflow, covering: **Amazon ECR** for image storage, ECS orchestration, configuration of the required **IAM Task Execution Role**, and securing the service via **VPC Security Groups**.
        </p>

        <h2>Challenges and Resolutions (Enhanced with Technical Context)</h2>

        <div class="problem">
            <strong>1. Local Python/Uvicorn Setup Issue on Windows:</strong> Running <code>uvicorn main:app --host 0.0.0.0 --port 8080</code> on Python 3.14 failed with a Windows launcher error: <em>"Unable to create process..."</em>.
        </div>
        <div class="solution">
            <strong>Resolution:</strong> The issue was resolved by invoking Uvicorn directly as a **Python module**, bypassing the problematic Windows launcher script. This ensured the application ran correctly before containerization.
            <pre>py -3.14 -m pip install fastapi "uvicorn[standard]"
py -3.14 -m uvicorn main:app --host 0.0.0.0 --port 8080</pre>
        </div>

        <div class="problem">
            <strong>2. ECR Region and Authentication Mismatch:</strong> Attempting a Docker push to the expected <code>eu-west-2</code> region failed because the actual ECR repository existed in <code>us-east-1</code>.
        </div>
        <div class="solution">
            <strong>Resolution:</strong> This required explicitly authenticating the Docker CLI against the correct region's registry before tagging and pushing the image. This highlights the importance of matching the build environment's configuration with the target AWS region for ECR operations.
            <pre>
aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin ACCOUNT_ID.dkr.ecr.us-east-1.amazonaws.com
docker tag ecs-python-app:latest ACCOUNT_ID.dkr.ecr.us-east-1.amazonaws.com/ecs-python-app:latest
docker push ACCOUNT_ID.dkr.ecr.us-east-1.amazonaws.com/ecs-python-app:latest
            </pre>
        </div>

        <div class="problem">
            <strong>3. ECS Service-Linked Role Dependency Error:</strong> Cluster creation failed with an IAM error:
            <pre>
Resource handler returned message: "Invalid request provided: CreateCluster Invalid Request: Unable to assume the service linked role..."
            </pre>
        </div>
        <div class="solution">
            <strong>Resolution:</strong> This indicated a temporary dependency issue where the **AWSServiceRoleForECS** was not immediately assumable. The solution was to verify the existence of the ECS Service-Linked Role using <code>aws iam get-role --role-name AWSServiceRoleForECS</code>. A subsequent cluster creation attempt succeeded, confirming the underlying IAM dependency was resolved.
        </div>

        <div class="problem">
            <strong>4. Security Group Blocking Ingress Traffic:</strong> The Fargate task was in a <code>RUNNING</code> state, but accessing the Task's Public IP failed (timeout).
        </div>
        <div class="solution">
            <strong>Resolution:</strong> The issue was a missing ingress rule on the **VPC Security Group** attached to the Fargate Task's Elastic Network Interface (ENI). An inbound rule was added to allow TCP traffic on the container's exposed port.
            <pre>
Type: Custom TCP
Port: 8080
Source: 0.0.0.0/0
            </pre>
            *Note: In a production environment, this source would typically be restricted to an Application Load Balancer's (ALB) Security Group for enhanced security.*
        </div>

        <h2>Key Learnings (Refined for Architectural Awareness)</h2>
        <ul>
            <li>**VPC Networking and Security:** Mastery of configuring **VPC Subnets** and **Security Groups** to ensure Fargate tasks can be publicly accessed while maintaining proper boundary security.</li>
            <li>**IAM Roles and Permissions:** Clear understanding of the distinct functions of the **Task Execution Role** (for ECR/CloudWatch) and the standard **Task Role** (for application-level service interaction).</li>
            <li>**Serverless Container Strategy (Fargate):** Successful selection and implementation of Fargate over the EC2 launch type, confirming knowledge of the serverless model for container orchestration.</li>
            <li>**AWS CLI/Docker ECR Integration:** Proficiency in using the AWS CLI for ECR authentication and managing the Docker image lifecycle (tagging, pushing) across different AWS regions.</li>
        </ul>

        <h2>Outcome</h2>
        <p>
            A containerized FastAPI application was successfully deployed on **AWS ECS Fargate**, accessible publicly via its Task Public IP. This project demonstrates strong hands-on experience in cloud deployment architecture, security configuration, and cross-service AWS integration.
        </p>

        <h2>Project Screenshots</h2>
        <div class="images">
            <div>
                <img src="ecsbuild.PNG" alt="Downloading and building Docker files">
                <p style="text-align:center;">ecsbuild.PNG â€” Downloading/building Docker files</p>
            </div>
            <div>
                <img src="cluster1.PNG" alt="Working on AWS Console">
                <p style="text-align:center;">cluster1.PNG â€” Working on AWS Console</p>
            </div>
            <div>
                <img src="simpleecsoutput.PNG" alt="Resulting ECS Output">
                <p style="text-align:center;">simpleecsoutput.PNG â€” Resulting ECS Output</p>
            </div>
        </div>
    </main>
</body>
</html>